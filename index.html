<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lucky Spin Rewards</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Telegram WebApp -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Adexora Rewarded -->
<script src="https://adexora.com/cdn/ads.js?id=1935"></script>

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(180deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.app{padding:16px}
.header{
  text-align:center;
  font-size:22px;
  font-weight:700;
  margin-bottom:16px;
}
.card{
  background:#2f4f5a;
  border-radius:16px;
  padding:20px;
  margin-bottom:16px;
}
.balance{
  text-align:center;
  font-size:18px;
}
.balance span{
  color:#00ffa6;
  font-size:30px;
  font-weight:800;
}
.btn{
  width:100%;
  padding:16px;
  margin-top:12px;
  border:none;
  border-radius:14px;
  background:linear-gradient(90deg,#ff8a00,#ffb347);
  color:#fff;
  font-size:18px;
  font-weight:700;
  cursor:pointer;
  transition:.2s;
}
.btn:active{transform:scale(.96)}
.btn:disabled{opacity:.6}
.note{text-align:center;font-size:12px;opacity:.8}

/* Spin wheel */
.wheel{
  width:180px;
  height:180px;
  border-radius:50%;
  margin:10px auto;
  background:conic-gradient(
    #ff9800 0deg 60deg,
    #ffc107 60deg 120deg,
    #ff5722 120deg 180deg,
    #4caf50 180deg 240deg,
    #03a9f4 240deg 300deg,
    #9c27b0 300deg 360deg
  );
  transition:transform 3s cubic-bezier(.17,.67,.12,1);
}
.pointer{
  width:0;height:0;
  border-left:10px solid transparent;
  border-right:10px solid transparent;
  border-bottom:20px solid #fff;
  margin:0 auto;
}

/* Popup */
.popup{
  position:fixed;
  inset:0;
  background:#000000aa;
  display:flex;
  align-items:center;
  justify-content:center;
}
.popup-box{
  background:#1c2f38;
  padding:20px;
  border-radius:16px;
  width:85%;
  max-width:300px;
}
.popup-box input{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:none;
}
.popup-box button{
  margin-top:12px;
}
.hidden{display:none}

/* Coin popup */
.coin-pop{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:#000000cc;
  padding:20px 26px;
  border-radius:16px;
  font-size:20px;
  font-weight:700;
  animation:pop 1.2s ease forwards;
}
@keyframes pop{
  0%{opacity:0; transform:translate(-50%,-50%) scale(.5)}
  30%{opacity:1; transform:translate(-50%,-60%) scale(1.1)}
  100%{opacity:0; transform:translate(-50%,-90%) scale(.8)}
}
</style>
</head>

<body>
<div class="app">

<div class="header">üé∞ Lucky Spin Rewards</div>

<div class="card balance">
  Balance<br>
  <span id="coins">0</span> Coins
</div>

<div class="card">
  <button class="btn" id="rewardBtn">üéØ Watch Ad & Earn</button>

  <div class="pointer"></div>
  <div class="wheel" id="wheel"></div>

  <button class="btn" id="spinBtn">üé° Lucky Spin</button>
  <button class="btn">üèõ Scratch Card</button>
</div>

<div class="card">
  <button class="btn" id="withdrawBtn">üí∞ Withdraw</button>
</div>

<div class="note">
  18+ Warning ‚Ä¢ Casino / Games ads may appear
</div>

</div>

<!-- Withdraw Popup -->
<div class="popup hidden" id="withdrawPopup">
  <div class="popup-box">
    <h3>Withdraw</h3>
    <input id="wallet" placeholder="Enter wallet / number">
    <button class="btn" id="confirmWithdraw">Confirm</button>
    <button class="btn" onclick="closeWithdraw()">Cancel</button>
  </div>
</div>

<!-- Sound -->
<audio id="coinSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3">
</audio>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

let coins = 0;
const coinEl = document.getElementById("coins");
const sound = document.getElementById("coinSound");

// Coin popup
function showCoinPopup(text){
  const d=document.createElement("div");
  d.className="coin-pop";
  d.innerText=text;
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),1200);
}

// Rewarded Ad
rewardBtn.onclick=()=>{
  window.showAdexora().then(()=>{
    coins++;
    coinEl.innerText=coins;
    sound.play();
    showCoinPopup("+1 Coin üéâ");
  }).catch(()=>alert("No ads available"));
};

// Spin
spinBtn.onclick=()=>{
  const wheel=document.getElementById("wheel");
  const deg=360*5+Math.floor(Math.random()*360);
  wheel.style.transform=`rotate(${deg}deg)`;
  setTimeout(()=>{
    coins+=2;
    coinEl.innerText=coins;
    showCoinPopup("+2 Coins üé°");
  },3000);
};

// Withdraw
withdrawBtn.onclick=()=>{
  document.getElementById("withdrawPopup").classList.remove("hidden");
};

function closeWithdraw(){
  document.getElementById("withdrawPopup").classList.add("hidden");
}

confirmWithdraw.onclick=()=>{
  const wallet=document.getElementById("wallet").value.trim();
  if(wallet===""){
    alert("Enter wallet/number");
    return;
  }
  if(coins<10){
    alert("Minimum 10 coins required");
    return;
  }
  coins=0;
  coinEl.innerText=coins;
  closeWithdraw();
  alert("Withdraw request submitted");
};
</script>

</body>
  </html>
